# -----------------------------------------------------------------------------
# ベースコンテナ
# -----------------------------------------------------------------------------

FROM nvcr.io/nvidia/pytorch:22.07-py3

# -----------------------------------------------------------------------------
# プロキシ設定
# -----------------------------------------------------------------------------



# -----------------------------------------------------------------------------
# ユーザー追加＆おまじない＆フォーマッター等追加
# -----------------------------------------------------------------------------

# timezone setting
# これをしないと、時間がずれてしまう
ENV TZ=Asia/Tokyo

RUN useradd -m vscode && \
    apt update -y && \
    apt upgrade -y && \
    # apt-get install -y libgl1-mesa-dev && \
    # apt-get install -y python3.8-tk && \
    # apt-get install -y fonts-ipafont && \
    pip install --upgrade pip && \
    # pip install black && \
    pip install flake8 && \
    pip install mypy

# -----------------------------------------------------------------------------
# Linuxで実行時にコンテナ内のユーザーiDをログインユーザーと同じにするシェル実行
# -----------------------------------------------------------------------------

ENTRYPOINT [".devcontainer/entrypoint.sh"]